<!-- dashboard.html -->
<!--

TODO
- bold page you're currently on in sidebar
- hide cabinets once you reach a certain number of cabinets

 -->
{% extends "base.html" %}

{% block head %}
  <title>Dashboard - Food Tracker</title>
{% endblock %}

{% block user-info %}
{% endblock %}

{% block content %}
<nav class="navbar navbar-light bg-light">
    <h1>Hello, {{ user.first_name }}</h1>
    <form class="form-inline">
      <a class="btn btn-sm btn-outline-secondary" type="button" href="{% url 'profile' %}">Profile</a>
      <a class="btn btn-sm btn-outline-secondary" type="button" href="{% url 'logout' %}">Log Out</a>
    </form>
  </nav>


    <nav class="sidebar card" id="sidebar" style = "width: 20rem;">
        <a class="nav-link has-submenu h1 text-dark" href="{% url 'dashboard' %}">My cabinets</a>

        <ul>
        {% for device in devices %}
            {% comment %} <li class="nav-link h6 text-dark"><a href="{% url 'cabinet' id=device.id %}">{{ device.name }}</a></li> {% endcomment %} 
        
            <li class="nav-link h6 text-dark">
                <span class="dot_online">
                    {% if device.status == 1 %}
                        <i class="dot_online"></i>
                    {% else %}
                        <i class="dot_offline"></i>
                    {% endif %}
                </span> <a href="{% url 'cabinet' device.id %}">{{ device.name }}</a>
            </li>
        {% empty %}
            <li>Sorry, no cabinets in this list.</li>
        {% endfor %}
        </ul>
        <a class="nav-link h1 text-dark" href="{% url 'recipes' %}">Recipes</a>
        <a class="nav-link h1 text-dark" href="{% url 'add_device' %}">Register Device</a>
    </nav>

    {% if message %}
    <h2> {{ message }} </h2>
    <!-- elif request.session.message -->
    <!-- <h2> request.session.message </h2> -->
    {% endif %}

    <ul>
        {% for device in devices %}
            <li>
                <a href="{% url 'cabinet' id=device.id %}">{{ device.name }}</a>
                <form action="{% url 'del_cabinet' id=device.id %}" method="post">
                    {% csrf_token %}
                    <button class="delete" type="submit">Delete</button>
                </form>
            </li>

        {% endfor %}
    </ul>

{% endblock %}

